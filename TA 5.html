<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kalkulator Interaktif - Dark Mode</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: #1a1a1a;
        color: white;
        display: flex;
        justify-content: center;
        padding: 20px;
    }
    .calculator {
        background: #2b2b2b;
        border-radius: 12px;
        width: 330px;
        padding: 20px;
        box-shadow: 0 6px 15px rgba(0,0,0,0.5);
    }
    .display {
        width: 100%;
        height: 65px;
        font-size: 30px;
        padding: 10px;
        text-align: right;
        border: none;
        background: #111;
        border-radius: 10px;
        color: #00eaff;
        margin-bottom: 12px;
    }
    .buttons {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 12px;
    }
    button {
        padding: 18px;
        font-size: 18px;
        border: none;
        background: #3a3a3a;
        border-radius: 10px;
        cursor: pointer;
        font-weight: bold;
        color: white;
        transition: 0.2s;
    }
    button:hover {
        background: #505050;
    }
    button.operator { background: #006edc; }
    button.operator:hover { background: #0a84ff; }
    button.equal { background: #0f9b4f; }
    button.equal:hover { background: #17c266; }
    button.clear { background: #d13a3a; }
    button.clear:hover { background: #ff4d4d; }
    button.memory { background: #c9a300; }
    button.memory:hover { background: #e6b800; }

    .history {
        margin-top: 20px;
        padding: 12px;
        background: #222;
        border-radius: 10px;
        max-height: 150px;
        overflow-y: auto;
        font-size: 14px;
        box-shadow: inset 0 0 10px rgba(0,0,0,0.4);
    }
    @media (max-width: 480px) {
        .calculator { width: 100%; }
    }
</style>
</head>

<body>

<div class="calculator">
    <input type="text" id="display" class="display" disabled>

    <div class="buttons">
        <button class="memory" onclick="memoryClear()">MC</button>
        <button class="memory" onclick="memoryRecall()">MR</button>
        <button class="memory" onclick="memoryAdd()">M+</button>
        <button class="memory" onclick="memorySubtract()">M-</button>

        <button class="clear" onclick="clearAll()">C</button>
        <button class="clear" onclick="clearEntry()">CE</button>
        <button class="operator" onclick="appendValue('/')">รท</button>
        <button class="operator" onclick="appendValue('*')">ร</button>

        <button onclick="appendValue('7')">7</button>
        <button onclick="appendValue('8')">8</button>
        <button onclick="appendValue('9')">9</button>
        <button class="operator" onclick="appendValue('-')">-</button>

        <button onclick="appendValue('4')">4</button>
        <button onclick="appendValue('5')">5</button>
        <button onclick="appendValue('6')">6</button>
        <button class="operator" onclick="appendValue('+')">+</button>

        <button onclick="appendValue('1')">1</button>
        <button onclick="appendValue('2')">2</button>
        <button onclick="appendValue('3')">3</button>
        <button class="equal" onclick="calculate()">=</button>

        <button onclick="appendValue('0')" style="grid-column: span 2;">0</button>
        <button onclick="appendValue('.')">.</button>
    </div>

    <div class="history">
        <strong>History (5 terakhir):</strong>
        <ul id="historyList"></ul>
        <button class="clear" onclick="clearHistory()" style="width: 100%; margin-top: 10px;">Clear History</button>
    </div>
</div>

<script>
    let display = document.getElementById("display");
    let historyList = document.getElementById("historyList");
    let history = [];
    let memory = 0;

    function appendValue(value) {
        display.value += value;
    }

    function clearAll() {
        display.value = "";
    }

    function clearEntry() {
        display.value = display.value.slice(0, -1);
    }

    function calculate() {
        try {
            if (display.value.includes('/0')) {
                display.value = "Error!";
                return;
            }

            let result = eval(display.value);

            addHistory(`${display.value} = ${result}`);
            display.value = result;

        } catch {
            display.value = "Error!";
        }
    }

    function addHistory(entry) {
        history.unshift(entry);

        if (history.length > 5) history.pop();

        historyList.innerHTML = history.map(h => `<li>${h}</li>`).join("");
    }

    function memoryAdd() {
        memory += Number(display.value || 0);
    }

    function memorySubtract() {
        memory -= Number(display.value || 0);
    }

    function memoryRecall() {
        display.value += memory;
    }

    function memoryClear() {
        memory = 0;
    }

    function clearHistory() {
        history = [];
        historyList.innerHTML = "";
    }

    document.addEventListener("keydown", (event) => {
        if (!isNaN(event.key)) appendValue(event.key);
        if (["+", "-", "*", "/"].includes(event.key)) appendValue(event.key);
        if (event.key === ".") appendValue(".");
        if (event.key === "Backspace") clearEntry();
        if (event.key === "Enter") calculate();
        if (event.key === "Delete") clearAll();
    });
</script>

</body>
</html>
